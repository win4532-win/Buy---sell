<!-- Header Component -->
<header class="header">
  <div class="container">
    <div class="header-inner">
      <!-- Logo -->
      <a href="index.html" class="logo">
        <span class="logo-icon">S</span>
        <span>ShopZone</span>
      </a>

      <!-- Navigation -->
      <nav class="nav">
        <a href="index.html" class="nav-link">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="index.html#products" class="nav-link">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
        <a href="index.html#categories" class="nav-link">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a>
        <a href="register-member.html" class="nav-link nav-member">üíé ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
        <!-- Admin Link (hidden by default) -->
        <a href="admin.html" class="nav-link nav-admin" id="admin-link" style="display:none">
          üõ°Ô∏è ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
        </a>
      </nav>

      <!-- Actions -->
      <div class="header-actions">
        <!-- Search -->
        <div class="search-box">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8" />
            <path d="m21 21-4.35-4.35" />
          </svg>
          <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...">
        </div>

        <!-- Cart -->
        <a href="order.html" class="cart-btn">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1" />
            <circle cx="20" cy="21" r="1" />
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" />
          </svg>
          <span class="cart-badge">0</span>
        </a>

        <!-- User Menu -->
        <div id="user-menu">
          <!-- Dynamic content based on login state -->
        </div>

        <!-- Mobile Menu -->
        <button class="mobile-menu-btn">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
  </div>
</header>

<script>
  // Update header based on user login state
  (function updateHeaderUser() {
    const userMenu = document.getElementById('user-menu');
    const adminLink = document.getElementById('admin-link');
    const user = JSON.parse(localStorage.getItem('currentUser'));

    if (user) {
      // Show user menu
      userMenu.innerHTML = `
        <div class="user-dropdown">
          <button class="user-btn" onclick="toggleUserDropdown()">
            <span class="user-avatar">${(user.name || 'U')[0].toUpperCase()}</span>
            <span class="user-name-header">${user.name || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'}</span>
            ${user.isAdmin ? '<span class="admin-badge">üëë</span>' : ''}
          </button>
          <div class="dropdown-menu" id="user-dropdown-menu">
            <a href="member.html" class="dropdown-item">üë§ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
            <a href="order.html" class="dropdown-item">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
            ${user.isAdmin ? '<a href="admin.html" class="dropdown-item">üõ°Ô∏è ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°</a>' : ''}
            <hr class="dropdown-divider">
            <button class="dropdown-item" onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
          </div>
        </div>
      `;

      // Show admin link in nav if admin
      if (adminLink && user.isAdmin) {
        adminLink.style.display = 'inline-block';
      }
    } else {
      // Show login button
      userMenu.innerHTML = `
        <a href="login.html" class="btn btn-primary btn-sm">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
      `;
    }
  })();

  // Toggle user dropdown
  function toggleUserDropdown() {
    const menu = document.getElementById('user-dropdown-menu');
    if (menu) {
      menu.classList.toggle('show');
    }
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.user-dropdown')) {
      const menu = document.getElementById('user-dropdown-menu');
      if (menu) menu.classList.remove('show');
    }
  });
</script>

<style>
  /* User Dropdown Styles */
  .user-dropdown {
    position: relative;
  }

  .user-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--color-gray-100);
    border: none;
    border-radius: var(--radius-full);
    padding: 0.25rem 0.75rem 0.25rem 0.25rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .user-btn:hover {
    background: var(--color-gray-200);
  }

  .user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
  }

  .user-name-header {
    font-size: 0.875rem;
    font-weight: 500;
    max-width: 100px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .admin-badge {
    font-size: 0.75rem;
  }

  .dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 0.5rem;
    background: white;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    min-width: 200px;
    padding: 0.5rem;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s;
    z-index: 1000;
  }

  .dropdown-menu.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .dropdown-item {
    display: block;
    padding: 0.75rem 1rem;
    color: var(--color-text);
    text-decoration: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
  }

  .dropdown-item:hover {
    background: var(--color-gray-100);
  }

  .dropdown-divider {
    border: none;
    border-top: 1px solid var(--color-gray-100);
    margin: 0.5rem 0;
  }

  .nav-admin {
    color: var(--color-primary) !important;
    font-weight: 600;
  }

  @media (max-width: 768px) {
    .user-name-header {
      display: none;
    }

    .user-btn {
      padding: 0.25rem;
    }
  }
</style>